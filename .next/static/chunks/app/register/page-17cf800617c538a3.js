(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{2715:function(e,t,r){Promise.resolve().then(r.bind(r,8512))},8512:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),s=r(2265),i=r(9376),n=r(9064),l=r(9205);let c=(0,l.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var o=r(1671);let u=(0,l.Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),d=(0,l.Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var m=r(6540);function h(){let[e,t]=(0,s.useState)({email:"",password:"",telegram:""}),[r,l]=(0,s.useState)(!1),[h,x]=(0,s.useState)(""),[f,p]=(0,s.useState)(1),[y,g]=(0,s.useState)(""),j=(0,i.useRouter)();async function k(t){t.preventDefault(),l(!0),x("");let r=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await r.json();l(!1),r.ok?(g(s.code),p(2),n.ZP.success("Registered! Check your Telegram to verify.",{icon:(0,a.jsx)(o.Z,{className:"text-green-500"})})):(x(s.error||"Registration failed"),n.ZP.error(s.error||"Registration failed",{icon:(0,a.jsx)(c,{className:"text-red-500"})}))}async function b(t){t.preventDefault(),l(!0),x("");let r=await fetch("/api/verify-telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,code:y})}),s=await r.json();l(!1),r.ok?(n.ZP.success("Telegram verified! You can now login.",{icon:(0,a.jsx)(u,{className:"text-green-500"})}),j.push("/login?verified=1")):(x(s.error||"Verification failed"),n.ZP.error(s.error||"Verification failed",{icon:(0,a.jsx)(c,{className:"text-red-500"})}))}return(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto mt-16 bg-white shadow-lg rounded-xl p-8",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-center text-blue-600 flex items-center justify-center gap-2",children:[(0,a.jsx)(d,{size:28}),"Register"]}),1===f&&(0,a.jsxs)("form",{onSubmit:k,className:"flex flex-col gap-4",children:[(0,a.jsx)("input",{required:!0,type:"email",placeholder:"Email",className:"input",value:e.email,onChange:e=>t(t=>({...t,email:e.target.value}))}),(0,a.jsx)("input",{required:!0,type:"password",placeholder:"Password",className:"input",value:e.password,onChange:e=>t(t=>({...t,password:e.target.value}))}),(0,a.jsx)("input",{required:!0,type:"text",placeholder:"Telegram Username (without @)",className:"input",value:e.telegram,onChange:e=>t(t=>({...t,telegram:e.target.value}))}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary w-full flex justify-center gap-2",disabled:r,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"animate-spin",size:18}),"Sending..."]}):"Register"}),h&&(0,a.jsxs)("div",{className:"text-red-600 text-sm flex items-center gap-1",children:[(0,a.jsx)(c,{size:16})," ",h]})]}),2===f&&(0,a.jsxs)("form",{onSubmit:b,className:"flex flex-col gap-4 text-sm text-gray-700 text-center",children:[(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"Your Telegram verification code:"})}),(0,a.jsx)("p",{className:"text-lg font-mono text-blue-600",children:y}),(0,a.jsxs)("p",{children:["Message ",(0,a.jsx)("b",{children:"@isfromin_bot"})," on Telegram and send:",(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"font-mono bg-gray-100 p-1 rounded inline-block mt-2",children:["/verify ",y]})]}),(0,a.jsx)("p",{children:"After verifying, click the button below."}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary w-full flex justify-center gap-2",disabled:r,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"animate-spin",size:18}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{size:18}),"Check Verification"]})}),h&&(0,a.jsxs)("div",{className:"text-red-600 text-sm flex items-center gap-1",children:[(0,a.jsx)(c,{size:16})," ",h]})]})]})}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var a=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:u="",children:d,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:n?24*Number(i)/Number(s):i,className:l("lucide",u),...!d&&!c(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:c,...o}=r;return(0,a.createElement)(u,{ref:i,iconNode:t,className:l("lucide-".concat(s(n(e))),"lucide-".concat(e),c),...o})});return r.displayName=n(e),r}},1671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6540:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[64,971,117,744],function(){return e(e.s=2715)}),_N_E=e.O()}]);