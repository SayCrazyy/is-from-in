(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6039:function(e,t,s){Promise.resolve().then(s.bind(s,1091))},1091:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(7437),a=s(2265),n=s(9376),i=s(9064),l=s(9205);let c=(0,l.Z)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var o=s(9345);let d=(0,l.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var u=s(1671),m=s(9202);let h=(0,l.Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),x=(0,l.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function p(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)([]),[p,y]=(0,a.useState)(!1),f=(0,n.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return f.push("/login");fetch("/api/profile",{headers:{Authorization:"Bearer "+e}}).then(e=>e.json()).then(e=>{if(!e.user)return f.push("/login");if(t(e.user),e.user.subdomain){var s;l((null===(s=e.user.records)||void 0===s?void 0:s.length)?e.user.records.map(t=>({...t,name:e.user.subdomain})):[{type:"A",name:e.user.subdomain,content:""}])}})},[]);let g=(e,t,s)=>{l(r=>r.map((r,a)=>a===e?{...r,[t]:s}:r))},b=e=>{l(t=>t.length>1?t.filter((t,s)=>s!==e):t)};async function j(t){t.preventDefault(),y(!0);let r=localStorage.getItem("token"),a=s.map(t=>({...t,name:e.subdomain})),n=await fetch("/api/save-records",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify({records:a})}),l=await n.json();y(!1),n.ok?i.ZP.success("DNS records saved!"):i.ZP.error(l.error||"Failed to save records.")}return e?e.telegramVerified?(0,r.jsxs)("div",{className:"w-full max-w-lg mx-auto mt-16 bg-white shadow-lg rounded-xl p-8",children:[(0,r.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-center text-blue-600 flex items-center justify-center gap-2",children:[(0,r.jsx)(c,{className:"h-6 w-6"})," Dashboard"]}),(0,r.jsxs)("div",{className:"mb-6 text-sm text-gray-700 space-y-1",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 text-gray-500"}),"Email: ",(0,r.jsx)("b",{children:e.email})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(d,{className:"h-4 w-4 text-gray-500"}),"Telegram: ",(0,r.jsxs)("b",{children:["@",e.telegramUsername]})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}),"Verified: ",(0,r.jsx)("b",{className:"text-green-600",children:"Yes"})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}),"Channel Member:"," ",(0,r.jsx)("b",{className:"text-green-600",children:e.isChannelMember?"Yes":"No"})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 text-gray-500"}),"Subdomain:"," ",(0,r.jsx)("b",{children:e.subdomain?"".concat(e.subdomain,".is-from.in"):"(not set)"})]})]}),e.subdomain?(0,r.jsxs)("form",{onSubmit:j,className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold mb-3",children:["DNS Records for ",(0,r.jsxs)("b",{children:[e.subdomain,".is-from.in"]})]}),(0,r.jsx)("div",{className:"space-y-2",children:s.map((t,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2 items-center",children:[(0,r.jsxs)("select",{value:t.type,onChange:e=>g(s,"type",e.target.value),className:"input",children:[(0,r.jsx)("option",{children:"A"}),(0,r.jsx)("option",{children:"AAAA"}),(0,r.jsx)("option",{children:"CNAME"}),(0,r.jsx)("option",{children:"TXT"}),(0,r.jsx)("option",{children:"MX"}),(0,r.jsx)("option",{children:"SRV"}),(0,r.jsx)("option",{children:"NS"})]}),(0,r.jsx)("input",{type:"text",value:e.subdomain,disabled:!0,className:"input bg-gray-100 cursor-not-allowed"}),(0,r.jsx)("input",{type:"text",placeholder:"Value",className:"input",value:t.content,onChange:e=>g(s,"content",e.target.value)}),(0,r.jsx)("button",{type:"button",onClick:()=>b(s),className:"text-red-600 hover:text-red-800",children:(0,r.jsx)(h,{className:"h-5 w-5"})})]},s))}),(0,r.jsxs)("button",{type:"button",onClick:()=>l(t=>[...t,{type:"A",name:e.subdomain,content:""}]),className:"text-blue-600 underline text-sm mt-2 flex items-center gap-1",children:[(0,r.jsx)(x,{className:"h-4 w-4"})," Add Record"]})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary w-full",disabled:p,children:p?"Saving...":"Save DNS Records"})]}):(0,r.jsxs)("div",{className:"text-center mt-6",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"You haven't created any subdomain yet."}),(0,r.jsx)("button",{onClick:()=>f.push("/subdomain"),className:"btn btn-primary",children:"Create Subdomain"})]})]}):(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-16 bg-white shadow-lg rounded-xl p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Telegram Not Verified"}),(0,r.jsx)("p",{className:"mb-2",children:"Please complete registration & verify Telegram."}),(0,r.jsx)("a",{className:"text-blue-600 underline",href:"/register",children:"Register Again"})]}):(0,r.jsx)("div",{children:"Loading..."})}},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:m,...h}=e;return(0,r.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:i?24*Number(n)/Number(a):n,className:l("lucide",d),...!u&&!c(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{className:c,...o}=s;return(0,r.createElement)(d,{ref:n,iconNode:t,className:l("lucide-".concat(a(i(e))),"lucide-".concat(e),c),...o})});return s.displayName=i(e),s}},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9202:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[64,971,117,744],function(){return e(e.s=6039)}),_N_E=e.O()}]);